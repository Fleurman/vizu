var Vizu=function(){const i={transition:"0.3s",arrowNavigation:!1,touchNavigation:!0,closeBackground:!1,closeButton:!0},e={branch:function(i,e){this._listeners[i]=this._listeners[i]||[],this._listeners[i].push(e)},_listeners:{},trigger:function(i){this._listeners[i].forEach(function(i){i()})}},t={preOpen:[],preClose:[],preNext:[],prePrevious:[],preVview:[],preTitle:[],preCount:[],open:[],close:[],next:[],previous:[],view:[],title:[],count:[]};let n=function(i,e,n){for(let s in t[i]){let r=t[i][s];void 0!==n&&(r=r.bind(n)),r(e,o)}},s={badListener:function(i){console.warn("Vizu listener '"+i+"' is not valid. Availaible listeners are : "+Object.keys(t))},badListenerRemove:function(i,e){console.warn("Couldn't remove listener '"+e.toString()+"' on event '"+i+"'")}},o=function(){let i={_single:{},images:[],next:function(){n("preNext",{id:this.id},this),this.id+1<this.size&&(this.id=this.id+1),n("next",{id:this.id},this)},prev:function(){n("prePrevious",{id:this.id},this),this.id-1>0&&(this.id=this.id-1),n("previous",{id:this.id},this)},listen:function(i,e){this._listeners[i]=e},unlisten:function(i){this._listeners[i]=void 0},_listeners:{},_id:0};return Object.defineProperty(i,"size",{get:function(){return this.images.length}}),Object.defineProperty(i,"id",{get:function(){return this._id},set:function(i){i=Math.max(0,Math.min(i,this.size-1)),this._id=i;for(let e in this._listeners)this._listeners[e](i)}}),Object.defineProperty(i,"isFirst",{get:function(){return 0==this.id}}),Object.defineProperty(i,"isLast",{get:function(){return this.size-1==this.id}}),Object.defineProperty(i,"single",{get:function(){return 0==this.size}}),Object.defineProperty(i,"item",{get:function(){return this.images[this.id]||this._single}}),i}(),r=function(){this.style.display="block"},c=function(){this.style.display="none"},d=document.createElement("div");d.id="Vizu",d.style.opacity="0",d.style.transition=i.transition,e.branch("config",function(){d.style.transition=i.transition}),d.show=function(){this.style.opacity=1,this.className="open"},d.hide=function(){this.style.opacity=0,this.className=""};let l=!1,u=function(i){if(!a&&o.size>0){let e=o.id;if(o.id+=i,e!=o.id){let e,t,s;i>0?(e=g,t="preNext",s="next"):(e=y,t="prePrevious",s="previous"),n(t,{id:o.id},e);let r=o.item;f.set(r.title),h.set(r.url),l=!0,n(s,{id:o.id},e)}}},a=!1,h=document.createElement("img");h.id="VizuScreen",h.style="width:auto;height:auto;max-width:100%;max-height:100%;top:50%;left:50%;position:relative;transform:translate(-50%, -50%);transition:"+i.transition,e.branch("config",function(){h.style.transition=i.transition}),h.init=function(i){this.style.opacity=1,this.src=i,a=!1},h.set=function(e){n("preView",{value:e},this),this.style.opacity=0,setTimeout(function(){let i=function(){this.style.opacity=1,this.removeEventListener("load",i),a=!1,n("view",{value:e},this)};this.addEventListener("load",i),this.src=e,a=!0}.bind(this),1e3*parseFloat(i.transition))};let f=document.createElement("div");f.id="VizuTitle",f.set=function(i){n("preTitle",{value:i},this),this.innerHTML=i,n("title",{value:i},this)};let p=document.createElement("span");p.id="VizuCount",o.listen("count",function(){let i=o.id+1,e=o.size;n("preCount",{id:i,size:e},p),p.innerHTML=i+"/"+e,n("count",{id:i,size:e},p)});let v=document.createElement("div");v.id="VizuClose",v.addEventListener("click",function(e){i.closeButton&&d.close()}),p.show=v.show=r,p.hide=v.hide=c;let m=function(i,e){let t=document.createElement("span");return t.className="VizuArrow",t.id="Vizu"+e,t.onclick=function(){u(i)},o.listen("arrows",function(){z()}),t.show=function(){this.style.display="block"},t.hide=function(){this.style.display="none"},t.enable=function(){this.classList.remove("disabled")},t.disable=function(){this.classList.add("disabled")},t},y=m(-1,"Previous"),g=m(1,"Next"),w=function(){y.show(),g.show()},b=function(){y.hide(),g.hide()},z=function(){o.size>0?(y.enable(),g.enable(),w(),p.show(),o.isFirst&&y.disable(),o.isLast&&g.disable()):(b(),p.hide()),i.closeButton?v.show():v.hide()},L=function(i){f.set(i.title),h.init(i.url)},k=function(i,e){n("preOpen",{item:i,id:e}),i instanceof Array?V(i,e):C(i),this.className="open",n("open",{item:i,id:e})},E=function(i){l||(39==i.keyCode?u(1):37==i.keyCode&&u(-1))},_=function(i){39!=i.keyCode&&37!=i.keyCode||(l=!1)},C=function(i){o.id=0,o._single=i,L(i),d.show()},V=function(e,t){o.images=e,o.id=t?t-1:0;let n=e[o.id];L(n),z(),d.show(),!0===i.arrowNavigation&&(window.addEventListener("keydown",E),window.addEventListener("keyup",_))},x=function(){n("preClose",{}),o.images=[],d.hide(),window.removeEventListener("keydown",E),window.removeEventListener("keyup",_),n("close",{})},N=function(i,e){t[i]?t[i].push(e):s.badListener(i)},O=function(i,e){if(t[i]){let n=-1;n=t[i].indexOf(e),-1!=n?t[i].splice(n,1):s.badListenerRemove(i,e)}else s.badListener(i)},P=function(i){let e=window.innerWidth;return i.clientX>e/2?1:-1};return window.addEventListener("click",function(e){i.closeBackground&&e.target==d?d.close():!o.single&&i.touchNavigation&&e.target==h&&u(P(e))}),d.getConfig=function(){return i},d.setConfig=function(t){Object.assign(i,t),e.trigger("config")},d.open=k,d.close=x,d.addVizuListener=N,d.removeVizuListener=O,[h,y,g,v,p,f].forEach(function(i){d.appendChild(i)}),document.body.appendChild(d),d}();